{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Hoja de Vida Profesional - {{ datos.nombres }} {{ datos.apellidos }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: white;
            color: #4a4a4a;
            line-height: 1.6;
            padding: 0;
        }
        
        .cv-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
        }
        
        /* HEADER */
        .pdf-header {
            background: linear-gradient(135deg, #5a4a9f 0%, #b8a5d4 100%);
            color: white;
            padding: 40px;
            text-align: center;
            border-bottom: 5px solid #a8d5f5;
        }
        
        .pdf-header .foto-perfil {
            width: 140px;
            height: 140px;
            border-radius: 70px;
            border: 4px solid white;
            margin: 0 auto 20px;
            display: block;
            object-fit: cover;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .pdf-header h1 {
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .pdf-header .profesion {
            font-size: 16px;
            opacity: 0.95;
            font-style: italic;
            margin-bottom: 15px;
        }
        
        .pdf-header .contacto {
            font-size: 12px;
            opacity: 0.9;
            line-height: 1.8;
        }
        
        /* CARDS */
        .card {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #b8a5d4;
            page-break-inside: avoid;
            border-bottom: 1px solid #e8d5f5;
        }
        
        .card h2 {
            font-size: 18px;
            color: #5a4a9f;
            margin-bottom: 18px;
            padding-bottom: 10px;
            border-bottom: 2px solid #a8d5f5;
            font-weight: 700;
        }
        
        .card h3 {
            font-size: 14px;
            color: #5a4a9f;
            margin-bottom: 4px;
            margin-top: 15px;
            font-weight: 700;
        }
        
        .card h4 {
            font-size: 13px;
            color: #8b7ba8;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        /* DATOS PERSONALES */
        .perfil {
            background: linear-gradient(135deg, #f8f4ff 0%, #fff8f0 100%);
            border-left: 5px solid #a8d5f5;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .info-item {
            font-size: 11px;
        }
        
        .info-item strong {
            color: #5a4a9f;
            font-weight: 700;
        }
        
        .info-item span {
            color: #6b5b8f;
        }
        
        /* ITEMS EN CARDS */
        .item {
            margin-bottom: 18px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0e6ff;
            page-break-inside: avoid;
        }
        
        .item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .item-title {
            font-size: 13px;
            color: #5a4a9f;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .item-subtitle {
            font-size: 11px;
            color: #8b7ba8;
            margin-bottom: 8px;
        }
        
        .date-badge {
            display: inline-block;
            background: #a8d5f5;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .item-description {
            font-size: 11px;
            color: #6b5b8f;
            line-height: 1.5;
            margin-top: 8px;
        }
        
        /* CERTIFICADOS */
        .certificado-page {
            page-break-before: always;
            text-align: center;
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            min-height: 100vh;
            background: white;
        }
        
        .certificado-titulo {
            font-size: 18px;
            color: #5a4a9f;
            margin-top: 15px;
            font-weight: 700;
        }
        
        .certificado-imagen {
            width: 95%;
            max-width: 900px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        /* PRODUCTOS GARAGE */
        .venta-item {
            background: #f8f4ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            page-break-inside: avoid;
            border-left: 4px solid #d4c5e8;
        }
        
        .venta-titulo {
            font-size: 13px;
            color: #5a4a9f;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .venta-precio {
            font-size: 14px;
            color: #b8a5d4;
            font-weight: 700;
            margin: 8px 0;
        }
        
        .venta-estado {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            margin: 8px 0;
        }
        
        .estado-bueno {
            background: #d4edda;
            color: #155724;
        }
        
        .estado-regular {
            background: #fff3cd;
            color: #856404;
        }
        
        .estado-malo {
            background: #f8d7da;
            color: #721c24;
        }
        
        .venta-descripcion {
            font-size: 11px;
            color: #6b5b8f;
            line-height: 1.5;
            margin-top: 8px;
        }
        
        /* ESPACIOS */
        .space {
            height: 20px;
        }
        
        .page-break {
            page-break-after: always;
        }
    </style>
</head>

<body>

<div class="cv-container">

<!-- ENCABEZADO PDF -->
<div class="pdf-header">
    {% if foto_base64 %}
        <img src="data:{{ foto_mime_type }};base64,{{ foto_base64 }}" class="foto-perfil">
    {% else %}
        <div style="width: 140px; height: 140px; border-radius: 70px; border: 4px solid white; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; background: rgba(255, 255, 255, 0.2); color: white; font-weight: 600;">
            Sin foto
        </div>
    {% endif %}
    
    <h1>{{ datos.nombres }} {{ datos.apellidos }}</h1>
    
    {% if datos.descripcionperfil %}
        <p class="profesion">{{ datos.descripcionperfil }}</p>
    {% endif %}
    
    <div class="contacto">
        {% if datos.telefonoconvencional or datos.telefonofijo %}
            üìû {% if datos.telefonoconvencional %}{{ datos.telefonoconvencional }}{% endif %} {% if datos.telefonofijo %}/ {{ datos.telefonofijo }}{% endif %}<br>
        {% endif %}
        {% if datos.sitioweb %}
            üåê {{ datos.sitioweb }}<br>
        {% endif %}
        {% if datos.direcciondomiciliaria %}
            üìç {{ datos.direcciondomiciliaria }}
        {% endif %}
    </div>
</div>

<!-- DATOS PERSONALES -->
<div class="card perfil">
    <h2>Informaci√≥n Personal</h2>
    
    <div class="info-grid">
        {% if datos.numerocedula %}
            <div class="info-item">
                <strong>C√©dula:</strong> <span>{{ datos.numerocedula }}</span>
            </div>
        {% endif %}
        {% if datos.nacionalidad %}
            <div class="info-item">
                <strong>Nacionalidad:</strong> <span>{{ datos.nacionalidad }}</span>
            </div>
        {% endif %}
        {% if datos.lugarnacimiento %}
            <div class="info-item">
                <strong>Lugar Nacimiento:</strong> <span>{{ datos.lugarnacimiento }}</span>
            </div>
        {% endif %}
        {% if datos.fechanacimiento %}
            <div class="info-item">
                <strong>Fecha Nacimiento:</strong> <span>{{ datos.fechanacimiento|date:"d \d\e F \d\e Y" }}</span>
            </div>
        {% endif %}
        {% if datos.sexo %}
            <div class="info-item">
                <strong>Sexo:</strong> <span>{% if datos.sexo == 'M' %}Mujer{% else %}Hombre{% endif %}</span>
            </div>
        {% endif %}
        {% if datos.estadocivil %}
            <div class="info-item">
                <strong>Estado Civil:</strong> <span>{{ datos.estadocivil }}</span>
            </div>
        {% endif %}
    </div>
</div>

<!-- EXPERIENCIA LABORAL -->
{% if experiencias and datos.mostrar_experiencia %}
<div class="card">
    <h2>Experiencia Laboral</h2>
    {% for e in experiencias %}
        <div class="item">
            <div class="item-title">
                {{ e.cargo }}
                <span class="date-badge">
                    {{ e.fechainicio|date:"m/Y" }} - {% if e.fechafin %}{{ e.fechafin|date:"m/Y" }}{% else %}Actual{% endif %}
                </span>
            </div>
            <div class="item-subtitle">{{ e.empresa }}</div>
            {% if e.descripcion %}
                <p class="item-description">{{ e.descripcion }}</p>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- CURSOS -->
{% if cursos and datos.mostrar_cursos %}
<div class="card">
    <h2>Capacitaciones y Cursos</h2>
    {% for c in cursos %}
        <div class="item">
            <div class="item-title">{{ c.curso }}</div>
            <div class="item-subtitle">{{ c.institucion }}</div>
            {% if c.fechainicio %}
                <div class="item-subtitle">
                    {{ c.fechainicio|date:"d/m/Y" }}
                    {% if c.fechafin %}- {{ c.fechafin|date:"d/m/Y" }}{% endif %}
                </div>
            {% endif %}
            {% if c.descripcion %}
                <p class="item-description">{{ c.descripcion }}</p>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- RECONOCIMIENTOS -->
{% if reconocimientos and datos.mostrar_reconocimientos %}
<div class="card">
    <h2>Reconocimientos y Distinciones</h2>
    {% for r in reconocimientos %}
        <div class="item">
            <div class="item-title">{{ r.nombrepremio }}</div>
            {% if r.fecha %}
                <div class="item-subtitle">üìÖ {{ r.fecha|date:"d \d\e F \d\e Y" }}</div>
            {% endif %}
            {% if r.descripcion %}
                <p class="item-description">{{ r.descripcion }}</p>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- PRODUCTOS ACAD√âMICOS -->
{% if productos_academicos and datos.mostrar_productos_academicos %}
<div class="card">
    <h2>Productos Acad√©micos</h2>
    {% for p in productos_academicos %}
        <div class="item">
            <div class="item-title">{{ p.nombre }}</div>
            {% if p.url %}
                <div class="item-subtitle">üîó <a href="{{ p.url }}" style="color: #b8a5d4; text-decoration: underline;">Ver publicaci√≥n</a></div>
            {% endif %}
            {% if p.descripcion %}
                <p class="item-description">{{ p.descripcion }}</p>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- PRODUCTOS LABORALES -->
{% if productos_laborales and datos.mostrar_productos_laborales %}
<div class="card">
    <h2>Productos Laborales</h2>
    {% for pl in productos_laborales %}
        <div class="item">
            <div class="item-title">{{ pl.nombre }}</div>
            {% if pl.ventas %}
                <div class="item-subtitle">üìä Ventas: {{ pl.ventas }}</div>
            {% endif %}
            {% if pl.url %}
                <div class="item-subtitle">üîó <a href="{{ pl.url }}" style="color: #b8a5d4; text-decoration: underline;">Ver producto</a></div>
            {% endif %}
            {% if pl.descripcion %}
                <p class="item-description">{{ pl.descripcion }}</p>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- VENTA GARAGE -->
{% if ventas and datos.mostrar_ventas %}
<div class="card">
    <h2>Venta Garage</h2>
    {% for v in ventas %}
        <div class="venta-item">
            <div class="venta-titulo">{{ v.nombre }}</div>
            <div class="venta-precio">üí∞ ${{ v.precio|floatformat:0 }}</div>
            <span class="venta-estado estado-bueno">Disponible</span>
            {% if v.descripcion %}
                <p class="venta-descripcion">{{ v.descripcion }}</p>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endif %}

</div>

</body>
</html>

